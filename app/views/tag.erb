<div class="container">
  <h1>Welcome to Sinatra!</h1>
  <p>Posts tagged with name <b><%= Tagname.find_by_id(params['id']).name %></b> (newest first)</p>

  <table>
    <tr>
      <th>Entry</th>
    </tr>
    <% Tag.order("entry DESC") %>
    <% @tags = Tag.where("tag = ?", params[:id]) %>
    <% @tags.each do |taggedentry| %>
    <% entry = Entry.find_by_id(taggedentry.entry) %>
    <tr><td><a href="/entry/<%= entry.id %>"><%= entry.title %></a></td></tr>
    <% end %>
  </table>

  <p></p>

  <table>
    <tr>
      <th>File Description</th>
      <th>File Location</th>
    </tr>
    <tr>
      <td>This view file</td>
      <td><code><%= __FILE__.gsub(Sinatra::Application.root, '') %></code></td>
    </tr>
    <tr>
      <td>The layout file</td>
      <td><code><%= File.expand_path('../layout.erb', __FILE__).gsub(Sinatra::Application.root, '') %></code></td>
    </tr>
    <tr>
      <td>The current controller</td>
      <td><code><%= File.expand_path('../../controllers/tags.rb', __FILE__).gsub(Sinatra::Application.root, '') %></code></td>
    </tr>
  </table>
</div>
